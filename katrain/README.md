copied and modified from [katrain](https://github.com/sanderland/katrain) v1.12

modified:

* komi and ruleset are None if they are missing.
